---
import type { CollectionEntry } from 'astro:content'
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import { SITE_TITLE } from '../consts'

export interface Props {
	author: any
	articles: any[]
}

const { author, articles } = Astro.props
const pageTitle = `${author.name} - ${SITE_TITLE}`
const description = `Read articles by ${author.name}, expert in AI and technology. View bio, credentials, and latest publications.`
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={pageTitle} description={description} />
		
		<!-- E-E-A-T Compliant Author Schema Markup -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Person",
			"name": author.name,
			"url": `https://aibuzzmedia.com/authors/${author.slug?.current || author.slug}`,
			"image": author.image,
			"description": author.bio ? author.bio.map((block: any) => 
				block.children?.map((child: any) => child.text).join(' ') || ''
			).join(' ') : `Expert AI technology journalist and ${author.expertise?.join(', ') || 'technology'} specialist`,
			"knowsAbout": author.expertise || ["Artificial Intelligence", "Technology", "News"],
			"jobTitle": "AI Technology Journalist",
			"worksFor": {
				"@type": "Organization",
				"name": "AI Buzz Media",
				"url": "https://aibuzzmedia.com",
				"logo": "https://aibuzzmedia.com/logo.png",
				"sameAs": [
					"https://twitter.com/aibuzzmedia",
					"https://linkedin.com/company/aibuzzmedia"
				]
			},
			"hasCredential": author.credentials ? [author.credentials] : undefined,
			"alumniOf": {
				"@type": "Organization",
				"name": "AI Technology Industry"
			},
			"sameAs": [
				"https://aibuzzmedia.com/authors",
				"https://linkedin.com/company/aibuzzmedia"
			],
			"author": {
				"@type": "Person",
				"name": author.name
			},
			"publisher": {
				"@type": "Organization",
				"name": "AI Buzz Media",
				"url": "https://aibuzzmedia.com"
			},
			"mainEntityOfPage": {
				"@type": "WebPage",
				"@id": `https://aibuzzmedia.com/authors/${author.slug?.current || author.slug}`
			}
		})} />
		
		<!-- Article List Schema for Author's Articles -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "ItemList",
			"name": `Articles by ${author.name}`,
			"description": `Latest articles and insights by ${author.name}, expert in AI and technology`,
			"numberOfItems": articles.length,
			"itemListElement": articles.map((article: any, index: number) => ({
				"@type": "ListItem",
				"position": index + 1,
				"item": {
					"@type": "NewsArticle",
					"headline": article.title,
					"description": article.excerpt,
					"image": article.featuredImage,
					"datePublished": article.publishedAt,
					"author": {
						"@type": "Person",
						"name": author.name,
						"url": `https://aibuzzmedia.com/authors/${author.slug?.current || author.slug}`
					},
					"publisher": {
						"@type": "Organization",
						"name": "AI Buzz Media",
						"url": "https://aibuzzmedia.com"
					},
					"url": `https://aibuzzmedia.com/${article.category?.slug || 'ai-news'}/${article.slug?.current || article.slug}`
				}
			}))
		})} />
	</head>
	<body>
		<Header />
		<main class="author-page">
			<div class="author-container">
				
				<!-- Author Hero Section -->
				<section class="author-hero">
					<div class="author-image">
						{author.image ? (
							<img src={author.image} alt={author.name} />
						) : (
							<div class="author-placeholder">
								{author.name.charAt(0).toUpperCase()}
							</div>
						)}
					</div>
					<div class="author-info">
						<h1 class="author-name">{author.name}</h1>
						<div class="author-expertise">
							{author.expertise && author.expertise.map((skill: string) => (
								<span class="expertise-tag">{skill}</span>
							))}
						</div>
						<div class="author-stats">
							<div class="stat">
								<span class="stat-number">{articles.length}</span>
								<span class="stat-label">Articles</span>
							</div>
							<div class="stat">
								<span class="stat-number">AI Expert</span>
								<span class="stat-label">Specialization</span>
							</div>
						</div>
					</div>
				</section>

				<!-- Author Bio -->
				<section class="author-bio">
					<h2>About {author.name}</h2>
					<div class="bio-content">
						{author.bio && author.bio.map((block: any) => (
							<p>{block.children?.[0]?.text || ''}</p>
						))}
						
						{author.credentials && (
							<div class="credentials">
								<h3>Credentials & Experience</h3>
								<p>{author.credentials}</p>
							</div>
						)}
					</div>
				</section>

				<!-- Author Articles -->
				<section class="author-articles">
					<h2>Latest Articles by {author.name}</h2>
					<div class="articles-grid">
						{articles.map((article: any) => (
							<article class="article-card">
								<div class="article-image">
									{article.featuredImage ? (
										<img src={article.featuredImage} alt={article.title} />
									) : (
										<div class="article-placeholder">ðŸ“°</div>
									)}
								</div>
								<div class="article-content">
									<span class="category-tag">{article.category}</span>
									<h3><a href={`/articles/${article.slug?.current || article.slug}`}>{article.title}</a></h3>
									<p>{article.excerpt}</p>
									<div class="article-meta">
										<span class="date">{new Date(article.publishedAt).toLocaleDateString()}</span>
									</div>
								</div>
							</article>
						))}
					</div>
				</section>

			</div>
		</main>
		<Footer />
	</body>
</html>

<style>
.author-page {
	background: var(--bg-primary);
	min-height: 100vh;
	padding: 2rem 0;
}

.author-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 0 2rem;
}

.author-hero {
	display: grid;
	grid-template-columns: auto 1fr;
	gap: 2rem;
	align-items: center;
	margin-bottom: 4rem;
	padding: 2rem;
	background: rgba(30, 30, 31, 0.8);
	backdrop-filter: blur(10px);
	border: 1px solid rgba(0, 212, 255, 0.2);
	border-radius: 16px;
}

.author-image {
	width: 120px;
	height: 120px;
	border-radius: 50%;
	overflow: hidden;
	border: 3px solid rgba(0, 212, 255, 0.3);
}

.author-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.author-placeholder {
	width: 100%;
	height: 100%;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 3rem;
	font-weight: 700;
	color: white;
}

.author-name {
	font-size: 2.5rem;
	font-weight: 700;
	margin-bottom: 1rem;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.author-expertise {
	display: flex;
	flex-wrap: wrap;
	gap: 0.5rem;
	margin-bottom: 1.5rem;
}

.expertise-tag {
	background: rgba(0, 212, 255, 0.1);
	border: 1px solid rgba(0, 212, 255, 0.3);
	padding: 0.25rem 0.75rem;
	border-radius: 20px;
	font-size: 0.8rem;
	color: #00d4ff;
}

.author-stats {
	display: flex;
	gap: 2rem;
}

.stat {
	display: flex;
	flex-direction: column;
	align-items: center;
	text-align: center;
}

.stat-number {
	font-size: 1.5rem;
	font-weight: 700;
	color: #00d4ff;
}

.stat-label {
	font-size: 0.8rem;
	color: #666666;
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

.author-bio {
	margin-bottom: 4rem;
}

.author-bio h2 {
	font-size: 2rem;
	margin-bottom: 2rem;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.bio-content {
	background: rgba(30, 30, 31, 0.6);
	backdrop-filter: blur(10px);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 12px;
	padding: 2rem;
}

.bio-content p {
	color: #b3b3b3;
	line-height: 1.7;
	margin-bottom: 1rem;
}

.credentials {
	margin-top: 2rem;
	padding-top: 2rem;
	border-top: 1px solid rgba(0, 212, 255, 0.2);
}

.credentials h3 {
	color: #00d4ff;
	margin-bottom: 1rem;
}

.author-articles h2 {
	font-size: 2rem;
	margin-bottom: 2rem;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

.articles-grid {
	display: grid;
	grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
	gap: 2rem;
}

.article-card {
	background: rgba(30, 30, 31, 0.8);
	backdrop-filter: blur(10px);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 12px;
	padding: 1.5rem;
	transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.article-card:hover {
	transform: translateY(-4px);
	box-shadow: 0 12px 40px rgba(0, 212, 255, 0.2);
}

.article-image {
	width: 100%;
	height: 150px;
	margin-bottom: 1rem;
	border-radius: 8px;
	overflow: hidden;
}

.article-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.article-placeholder {
	width: 100%;
	height: 100%;
	background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 102, 255, 0.2) 100%);
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 2rem;
}

.category-tag {
	background: rgba(0, 212, 255, 0.1);
	border: 1px solid rgba(0, 212, 255, 0.3);
	padding: 0.25rem 0.75rem;
	border-radius: 12px;
	font-size: 0.7rem;
	color: #00d4ff;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-bottom: 0.5rem;
	display: inline-block;
}

.article-content h3 {
	margin: 0.5rem 0;
	font-size: 1.2rem;
}

.article-content h3 a {
	color: #ffffff;
	text-decoration: none;
	transition: color 0.3s ease;
}

.article-content h3 a:hover {
	color: #00d4ff;
}

.article-content p {
	color: #b3b3b3;
	line-height: 1.6;
	margin-bottom: 1rem;
}

.article-meta {
	font-size: 0.8rem;
	color: #666666;
}

@media (max-width: 768px) {
	.author-hero {
		grid-template-columns: 1fr;
		text-align: center;
		gap: 1rem;
	}
	
	.author-image {
		margin: 0 auto;
	}
	
	.author-name {
		font-size: 2rem;
	}
	
	.author-stats {
		justify-content: center;
	}
	
	.articles-grid {
		grid-template-columns: 1fr;
	}
}
</style>