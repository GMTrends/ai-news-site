---
// Newsletter subscription section - REBUILT
---

<section class="subscribe-section">
	<div class="subscribe-container">
		<div class="subscribe-content">
			<div class="subscribe-text">
				<h2 class="subscribe-title">Stay Ahead in AI</h2>
				<p class="subscribe-subtitle">Get the latest AI news, reviews, and insights delivered to your inbox. Join 50,000+ professionals who trust AI Buzz Media.</p>
				<div class="subscribe-benefits">
					<div class="benefit">
						<span class="benefit-icon">ðŸ“§</span>
						<span>Weekly newsletter</span>
					</div>
					<div class="benefit">
						<span class="benefit-icon">ðŸš€</span>
						<span>Breaking news alerts</span>
					</div>
					<div class="benefit">
						<span class="benefit-icon">ðŸŽ¯</span>
						<span>Exclusive insights</span>
					</div>
				</div>
			</div>
			
			<div class="subscribe-form-wrapper">
				<div class="subscribe-form">
					<div class="form-group">
						<input 
							type="email" 
							id="emailInput"
							class="subscribe-input" 
							placeholder="Enter your email address"
							autocomplete="email"
						/>
						<button type="button" class="subscribe-button" id="subscribeBtn">
							<span class="button-text">Subscribe</span>
							<span class="button-icon">ðŸ“§</span>
						</button>
					</div>
					
					<div class="form-message-container">
						<div class="form-message" id="subscribeMessage" style="display: none;"></div>
					</div>
				</div>
			</div>
		</div>
	</div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('Newsletter script loaded');
    
    const emailInput = document.getElementById('emailInput');
    const subscribeBtn = document.getElementById('subscribeBtn');
    const message = document.getElementById('subscribeMessage');
    
    if (!emailInput || !subscribeBtn || !message) {
        console.error('Required elements not found');
        return;
    }
    
    subscribeBtn.addEventListener('click', async function() {
        console.log('Subscribe button clicked');
        
        const email = emailInput.value.trim();
        
        if (!email) {
            showMessage('Please enter your email address', 'error');
            return;
        }
        
        if (!isValidEmail(email)) {
            showMessage('Please enter a valid email address', 'error');
            return;
        }
        
        // Show loading state
        showMessage('Submitting...', 'loading');
        subscribeBtn.disabled = true;
        emailInput.disabled = true;
        
        try {
            const response = await fetch('/api/subscribe', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email: email })
            });
            
            const data = await response.json();
            
            if (response.ok && data.success) {
                showMessage('Registration Successful! Welcome to AI Buzz Media.', 'success');
                emailInput.value = '';
            } else {
                showMessage(data.error || 'Subscription failed. Please try again.', 'error');
            }
            
        } catch (error) {
            console.error('Subscription error:', error);
            showMessage('Network error. Please try again.', 'error');
        } finally {
            subscribeBtn.disabled = false;
            emailInput.disabled = false;
        }
    });
    
    function showMessage(text, type) {
        message.textContent = text;
        message.className = `form-message ${type}`;
        message.style.display = 'block';
        
        if (type === 'success' || type === 'error') {
            setTimeout(() => {
                message.style.display = 'none';
            }, 5000);
        }
    }
    
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
});
</script>

<style>
.subscribe-section {
	padding: 6rem 0;
	background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
	position: relative;
	overflow: hidden;
}

.subscribe-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 0 2rem;
}

.subscribe-content {
	display: grid;
	grid-template-columns: 1fr 1fr;
	gap: 4rem;
	align-items: center;
	padding: 4rem;
	background: rgba(255, 255, 255, 0.02);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 24px;
	backdrop-filter: blur(10px);
}

.subscribe-title {
	font-size: 3rem;
	font-weight: 700;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	margin-bottom: 1.5rem;
	line-height: 1.1;
}

.subscribe-subtitle {
	font-size: 1.2rem;
	color: #b3b3b3;
	line-height: 1.6;
	margin-bottom: 2rem;
}

.subscribe-benefits {
	display: flex;
	flex-direction: column;
	gap: 1rem;
}

.benefit {
	display: flex;
	align-items: center;
	gap: 1rem;
	color: #ffffff;
	font-weight: 500;
}

.benefit-icon {
	background: linear-gradient(135deg, rgba(0, 212, 255, 0.2) 0%, rgba(0, 102, 255, 0.2) 100%);
	border-radius: 50%;
	width: 40px;
	height: 40px;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 1.2rem;
}

.subscribe-form-wrapper {
	display: flex;
	flex-direction: column;
	justify-content: center;
}

.subscribe-form {
	background: rgba(0, 0, 0, 0.3);
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 16px;
	padding: 2rem;
}

.form-group {
	display: flex;
	flex-direction: column;
	gap: 1rem;
	margin-bottom: 1rem;
}

.subscribe-input {
	padding: 1rem 1.5rem;
	background: rgba(255, 255, 255, 0.05);
	border: 2px solid rgba(255, 255, 255, 0.1);
	border-radius: 12px;
	color: #ffffff;
	font-size: 1rem;
	transition: all 0.3s ease;
}

.subscribe-input:focus {
	outline: none;
	border-color: #00d4ff;
	box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
	background: rgba(255, 255, 255, 0.08);
}

.subscribe-input::placeholder {
	color: #666666;
}

.subscribe-button {
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	color: white;
	border: none;
	padding: 1rem 2rem;
	border-radius: 12px;
	font-size: 1.1rem;
	font-weight: 600;
	cursor: pointer;
	transition: all 0.3s ease;
	position: relative;
	overflow: hidden;
}

.subscribe-button:disabled {
	opacity: 0.6;
	cursor: not-allowed;
}

.subscribe-button:hover:not(:disabled) {
	transform: translateY(-3px);
	box-shadow: 0 15px 40px rgba(0, 212, 255, 0.4);
}

.form-message-container {
	margin-top: 1rem;
}

.form-message {
	padding: 1rem;
	border-radius: 8px;
	text-align: center;
	font-weight: 500;
	animation: slideIn 0.3s ease;
}

.form-message.success {
	background: rgba(34, 197, 94, 0.15);
	border: 1px solid rgba(34, 197, 94, 0.3);
	color: #22c55e;
}

.form-message.error {
	background: rgba(239, 68, 68, 0.15);
	border: 1px solid rgba(239, 68, 68, 0.3);
	color: #ef4444;
}

.form-message.loading {
	background: rgba(59, 130, 246, 0.15);
	border: 1px solid rgba(59, 130, 246, 0.3);
	color: #3b82f6;
}

@keyframes slideIn {
	from {
		opacity: 0;
		transform: translateY(-10px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

/* Responsive Design */
@media (max-width: 968px) {
	.subscribe-content {
		grid-template-columns: 1fr;
		gap: 3rem;
		padding: 3rem;
		text-align: center;
	}
	
	.subscribe-title {
		font-size: 2.5rem;
	}
	
	.subscribe-benefits {
		justify-content: center;
		align-items: center;
	}
}

@media (max-width: 768px) {
	.subscribe-section {
		padding: 4rem 0;
	}
	
	.subscribe-content {
		padding: 2rem;
		gap: 2rem;
	}
	
	.subscribe-title {
		font-size: 2rem;
	}
	
	.subscribe-subtitle {
		font-size: 1rem;
	}
	
	.form-group {
		gap: 0.75rem;
	}
	
	.subscribe-input,
	.subscribe-button {
		padding: 0.75rem 1rem;
	}	
}
</style>
