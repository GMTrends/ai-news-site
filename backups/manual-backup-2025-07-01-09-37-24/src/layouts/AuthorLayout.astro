---
import type { CollectionEntry } from 'astro:content'
import BaseHead from '../components/BaseHead.astro'
import Header from '../components/Header.astro'
import Footer from '../components/Footer.astro'
import { SITE_TITLE } from '../consts'
import { getCategoryUrl } from '../utils/urlHelpers'

export interface Props {
	author: any
	articles: any[]
}

const { author, articles } = Astro.props
const pageTitle = `${author.data.name} - ${SITE_TITLE}`
const description = `Read articles by ${author.data.name}, expert in AI and technology. View bio, credentials, and latest publications.`
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={pageTitle} description={description} image={author.data.avatar || "/assets/blog-placeholder-1.jpg"} />
		
		<!-- E-E-A-T Compliant Author Schema Markup -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "Person",
			"name": author.data.name,
			"url": `https://aibuzzmedia.com/authors/${author.slug}`,
			"image": author.data.avatar,
			"description": author.data.bio || `Expert AI technology journalist and technology specialist`,
			"knowsAbout": ["Artificial Intelligence", "Technology", "News"],
			"jobTitle": "AI Technology Journalist",
			"worksFor": {
				"@type": "Organization",
				"name": "AI Buzz Media",
				"url": "https://aibuzzmedia.com",
				"logo": "https://aibuzzmedia.com/logo.png",
				"sameAs": [
					"https://twitter.com/aibuzzmedia",
					"https://linkedin.com/company/aibuzzmedia"
				]
			},
			"alumniOf": {
				"@type": "Organization",
				"name": "AI Technology Industry"
			},
			"sameAs": [
				"https://aibuzzmedia.com/authors",
				"https://linkedin.com/company/aibuzzmedia"
			],
			"author": {
				"@type": "Person",
				"name": author.data.name
			},
			"publisher": {
				"@type": "Organization",
				"name": "AI Buzz Media",
				"url": "https://aibuzzmedia.com"
			},
			"mainEntityOfPage": {
				"@type": "WebPage",
				"@id": `https://aibuzzmedia.com/authors/${author.slug}`
			}
		})} />
		
		<!-- Article List Schema for Author's Articles -->
		<script type="application/ld+json" set:html={JSON.stringify({
			"@context": "https://schema.org",
			"@type": "ItemList",
			"name": `Articles by ${author.data.name}`,
			"description": `Latest articles and insights by ${author.data.name}, expert in AI and technology`,
			"numberOfItems": articles.length,
			"itemListElement": articles.map((article: any, index: number) => ({
				"@type": "ListItem",
				"position": index + 1,
				"item": {
					"@type": "NewsArticle",
					"headline": article.data.title,
					"description": article.data.excerpt,
					"image": article.data.image,
					"datePublished": article.data.publishedAt,
					"author": {
						"@type": "Person",
						"name": author.data.name,
						"url": `https://aibuzzmedia.com/authors/${author.slug}`
					},
					"publisher": {
						"@type": "Organization",
						"name": "AI Buzz Media",
						"url": "https://aibuzzmedia.com"
					},
					"url": `https://aibuzzmedia.com/${article.data.category || 'ai-news'}/${article.slug}`
				}
			}))
		})} />
	</head>
	<body>
		<Header />
		<main class="author-page">
			<div class="author-container">
				
				<!-- Author Hero Section -->
				<section class="author-hero">
					<div class="author-image">
						{author.data.avatar ? (
							<img src={author.data.avatar} alt={author.data.name} />
						) : (
							<div class="author-placeholder">
								{author.data.name.charAt(0).toUpperCase()}
							</div>
						)}
					</div>
					<div class="author-info">
						<h1 class="author-name">{author.data.name}</h1>
						<div class="author-expertise">
							<span class="expertise-tag">AI Expert</span>
							<span class="expertise-tag">Technology</span>
							<span class="expertise-tag">Journalism</span>
						</div>
						<div class="author-stats">
							<div class="stat">
								<span class="stat-number">{articles.length}</span>
								<span class="stat-label">Articles</span>
							</div>
							<div class="stat">
								<span class="stat-number">AI Expert</span>
								<span class="stat-label">Specialization</span>
							</div>
						</div>
					</div>
				</section>

				<!-- Author Bio -->
				<section class="author-bio">
					<h2>About {author.data.name}</h2>
					<div class="bio-content">
						{author.data.bio && (
							<p>{author.data.bio}</p>
						)}
						
						{!author.data.bio && (
							<p>{author.data.name} is an expert AI technology journalist with years of experience covering the latest developments in artificial intelligence, machine learning, and emerging technologies. Their insights help readers understand complex AI concepts and stay informed about industry trends.</p>
						)}
					</div>
				</section>

				<!-- Author Articles -->
				<section class="author-articles">
					<h2>Latest Articles by {author.data.name}</h2>
					<div class="articles-grid">
						{articles.map((article: any) => (
							<article class="article-card">
								<div class="article-image">
									{article.data.image ? (
										<img src={article.data.image} alt={article.data.title} />
									) : (
										<div class="article-placeholder">ðŸ“°</div>
									)}
								</div>
								<div class="article-content">
									<a href={getCategoryUrl(article.data.category || 'AI News')} class="category-badge-small category-link-safe">
										{article.data.category || 'AI News'}
									</a>
									<h3><a href={`/${article.data.category || 'ai-news'}/${article.slug}`}>{article.data.title}</a></h3>
									<p>{article.data.excerpt}</p>
									<div class="article-meta">
										<span class="date">{new Date(article.data.publishedAt || Date.now()).toLocaleDateString()}</span>
									</div>
								</div>
							</article>
						))}
					</div>
				</section>

			</div>
		</main>
		<Footer />
	</body>
</html>

<style>
.author-page {
	background: var(--bg-primary);
	min-height: 100vh;
	padding: 2rem 0;
}

.author-container {
	max-width: 1200px;
	margin: 0 auto;
	padding: 0 2rem;
}

.author-hero {
	display: grid;
	grid-template-columns: auto 1fr;
	gap: 3rem;
	align-items: center;
	padding: 3rem 0;
	border-bottom: 2px solid rgba(0, 212, 255, 0.2);
	margin-bottom: 3rem;
}

.author-image {
	width: 150px;
	height: 150px;
	border-radius: 50%;
	overflow: hidden;
	border: 4px solid rgba(0, 212, 255, 0.3);
}

.author-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.author-placeholder {
	width: 100%;
	height: 100%;
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 3rem;
	font-weight: 700;
	color: white;
}

.author-info h1 {
	font-size: 2.5rem;
	font-weight: 700;
	color: #ffffff;
	margin-bottom: 1rem;
}

.author-expertise {
	display: flex;
	gap: 0.5rem;
	margin-bottom: 1.5rem;
	flex-wrap: wrap;
}

.expertise-tag {
	background: rgba(0, 212, 255, 0.2);
	color: #00d4ff;
	padding: 0.5rem 1rem;
	border-radius: 20px;
	font-size: 0.9rem;
	font-weight: 600;
}

.author-stats {
	display: flex;
	gap: 2rem;
}

.stat {
	text-align: center;
}

.stat-number {
	display: block;
	font-size: 1.5rem;
	font-weight: 700;
	color: #00d4ff;
}

.stat-label {
	font-size: 0.9rem;
	color: #888888;
}

.author-bio {
	margin-bottom: 4rem;
}

.author-bio h2 {
	font-size: 2rem;
	font-weight: 600;
	color: #ffffff;
	margin-bottom: 1.5rem;
}

.bio-content p {
	color: #cccccc;
	line-height: 1.7;
	font-size: 1.1rem;
	margin-bottom: 1rem;
}

.credentials {
	margin-top: 2rem;
	padding: 1.5rem;
	background: rgba(0, 212, 255, 0.1);
	border-radius: 12px;
	border-left: 4px solid #00d4ff;
}

.credentials h3 {
	color: #00d4ff;
	margin-bottom: 0.5rem;
	font-size: 1.2rem;
}

.author-articles h2 {
	font-size: 2rem;
	font-weight: 600;
	color: #ffffff;
	margin-bottom: 2rem;
}

.articles-grid {
	display: grid;
	grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
	gap: 2rem;
}

.article-card {
	background: #1a1a1b;
	border: 1px solid rgba(255, 255, 255, 0.1);
	border-radius: 16px;
	overflow: hidden;
	transition: all 0.3s ease;
}

.article-card:hover {
	transform: translateY(-4px);
	box-shadow: 0 20px 40px rgba(0, 212, 255, 0.2);
	border-color: rgba(0, 212, 255, 0.3);
}

.article-image {
	height: 200px;
	overflow: hidden;
}

.article-image img {
	width: 100%;
	height: 100%;
	object-fit: cover;
}

.article-placeholder {
	width: 100%;
	height: 100%;
	display: flex;
	align-items: center;
	justify-content: center;
	font-size: 3rem;
	background: rgba(0, 212, 255, 0.1);
}

.article-content {
	padding: 1.5rem;
}

.category-badge-small {
	font-size: 0.65rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.5px;
	padding: 0.2rem 0.5rem;
	border-radius: 12px;
	display: inline-block;
	margin-bottom: 0.75rem;
	background: rgba(0, 212, 255, 0.2);
	color: #00d4ff;
	transition: all 0.3s ease;
}

.category-badge-small:hover {
	transform: translateY(-2px);
	box-shadow: 0 6px 16px rgba(0, 212, 255, 0.4);
	background: rgba(0, 212, 255, 0.3);
	color: #ffffff;
}

.article-content h3 {
	font-size: 1.25rem;
	font-weight: 600;
	margin-bottom: 0.75rem;
}

.article-content h3 a {
	color: #ffffff;
	text-decoration: none;
	transition: all 0.3s ease;
}

.article-content h3 a:hover {
	background: linear-gradient(135deg, #00d4ff 0%, #0066ff 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
	transform: translateX(2px);
}

.article-content p {
	color: #cccccc;
	line-height: 1.6;
	margin-bottom: 1rem;
}

.article-meta {
	font-size: 0.85rem;
	color: #888888;
}

@media (max-width: 768px) {
	.author-hero {
		grid-template-columns: 1fr;
		text-align: center;
		gap: 2rem;
	}
	
	.author-image {
		margin: 0 auto;
	}
	
	.author-stats {
		justify-content: center;
	}
	
	.articles-grid {
		grid-template-columns: 1fr;
	}
	
	.author-info h1 {
		font-size: 2rem;
	}
}
</style>