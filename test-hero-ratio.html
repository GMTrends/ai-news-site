<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hero Ratio Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: white;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .results {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .status {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .success { color: #00ff00; }
        .error { color: #ff0000; }
        
        .measurements {
            font-family: monospace;
            background: #333;
            padding: 10px;
            border-radius: 4px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Hero Grid 2:1 Ratio Test</h1>
        <div class="results" id="results">
            <div class="status">Testing...</div>
        </div>
    </div>

    <script>
        async function testHeroRatio() {
            try {
                // Open the main site in a new window/tab
                const siteWindow = window.open('http://localhost:4321', '_blank');
                
                if (!siteWindow) {
                    document.getElementById('results').innerHTML = `
                        <div class="status error">❌ Could not open site window</div>
                        <p>Please manually check the Hero section at <a href="http://localhost:4321" target="_blank">http://localhost:4321</a></p>
                    `;
                    return;
                }
                
                // Wait for the site to load
                setTimeout(() => {
                    try {
                        const heroGrid = siteWindow.document.querySelector('.hero-grid');
                        
                        if (!heroGrid) {
                            document.getElementById('results').innerHTML = `
                                <div class="status error">❌ Hero grid not found</div>
                                <p>Could not find .hero-grid element on the page</p>
                            `;
                            siteWindow.close();
                            return;
                        }
                        
                        const children = heroGrid.children;
                        
                        if (children.length < 2) {
                            document.getElementById('results').innerHTML = `
                                <div class="status error">❌ Insufficient grid children</div>
                                <p>Found ${children.length} children, expected at least 2</p>
                            `;
                            siteWindow.close();
                            return;
                        }
                        
                        const mainRect = children[0].getBoundingClientRect();
                        const sidebarRect = children[1].getBoundingClientRect();
                        
                        const mainWidth = mainRect.width;
                        const sidebarWidth = sidebarRect.width;
                        const ratio = mainWidth / sidebarWidth;
                        const isCorrect = Math.abs(ratio - 2) < 0.1;
                        
                        const computedStyle = siteWindow.getComputedStyle(heroGrid);
                        
                        document.getElementById('results').innerHTML = `
                            <div class="status ${isCorrect ? 'success' : 'error'}">
                                ${isCorrect ? '✅ HERO GRID RATIO CORRECT' : '❌ HERO GRID RATIO INCORRECT'}
                            </div>
                            <div class="measurements">
                                Ratio: ${ratio.toFixed(2)}:1 (Expected: 2.00:1)
                                Main width: ${mainWidth.toFixed(1)}px
                                Sidebar width: ${sidebarWidth.toFixed(1)}px
                                
                                Computed CSS:
                                display: ${computedStyle.display}
                                grid-template-columns: ${computedStyle.gridTemplateColumns}
                                gap: ${computedStyle.gap}
                            </div>
                        `;
                        
                        siteWindow.close();
                        
                    } catch (error) {
                        document.getElementById('results').innerHTML = `
                            <div class="status error">❌ Error accessing site</div>
                            <p>Error: ${error.message}</p>
                            <p>This might be due to CORS restrictions. Please manually check the Hero section.</p>
                        `;
                        siteWindow.close();
                    }
                }, 2000);
                
            } catch (error) {
                document.getElementById('results').innerHTML = `
                    <div class="status error">❌ Test failed</div>
                    <p>Error: ${error.message}</p>
                `;
            }
        }
        
        // Run test when page loads
        window.addEventListener('load', () => {
            setTimeout(testHeroRatio, 500);
        });
    </script>
</body>
</html>
